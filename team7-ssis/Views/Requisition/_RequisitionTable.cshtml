<table id="myTable" class="table table-striped table-bordered" style="width: 100%">
    <thead>
        <tr>
            <th>Requisition</th>
            <th>Item Code</th>
            <th>Description</th>
            <th>Qty</th>
            <th>Status</th>
            <th></th>
        </tr>
    </thead>

</table>

<script>
    $(document).ready(function () {
        var oTable = $('#myTable').DataTable({

            sAjaxSource: "api/reqdetail/all",
            sAjaxDataProp: "",

            columns: [
                { "data": "Requisition", "autoWidth": true },
                { "data": "ItemCode", "autoWidth": true },
                { "data": "Description", "autoWidth": true },
                { "data": "Quantity", "autoWidth": true },
                { "data": "Status", "autoWidth": true },
            ],
            select: 'single'
        });
    })

    // See if DataTable selection works
    //$('#myTable').click(function () {
    //    var table = $('#myTable').DataTable();
    //    console.log(table.rows({ selected: true }).data().toArray());
    //})

    $('#processAllRequisitionButton').click(function () {
        console.log("Create New Requisition clicked!");

        var data = $('#myTable').DataTable().rows({ selected: true }).data().toArray();
        var reqIdArray = [];
        for (i = 0; i < data.length; i++) {
            reqIdArray[i] = data[i].Requisition;
        }
        //console.log(reqIdArray);

        // call the appropriate controller with the data
        $.ajax({
            type: "POST",
            contentType: 'application/json',
            url: "/api/processrequisitions",
            data: JSON.stringify(reqIdArray),
            dataType: "json",
            success: function (message) {
                window.location.href = "Requisition/StationeryDisbursement/" + message.message;
            }
        });
    })

</script>